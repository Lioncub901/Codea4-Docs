<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Drawing" href="drawing.html" /><link rel="prev" title="Migration from Codea 3.x" href="codea_3x.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><meta name="generator" content="sphinx-4.3.2, furo 2021.11.16"/>
        <title>How Codea Works - Codea 4.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=916d6ed8f59335acffa15474ff504849343d4c76" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=0af69da206d614734f649b27d4cdc2dd6c31f41d" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Codea 4.0 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand centered" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/icon.png" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">Codea 4.0 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Manual:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../manual.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="codea_3x.html">Migration from Codea 3.x</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">How Codea Works</a></li>
<li class="toctree-l1"><a class="reference internal" href="drawing.html">Drawing</a></li>
<li class="toctree-l1"><a class="reference internal" href="sound.html">Sound</a></li>
<li class="toctree-l1"><a class="reference internal" href="assets.html">Assets</a></li>
<li class="toctree-l1"><a class="reference internal" href="input.html">Input</a></li>
<li class="toctree-l1"><a class="reference internal" href="physics2d.html">2D Physics (Box 2D)</a></li>
<li class="toctree-l1"><a class="reference internal" href="physics3d.html">3D Physics (Bullet 3D)</a></li>
<li class="toctree-l1"><a class="reference internal" href="scenes.html">Scenes</a></li>
<li class="toctree-l1"><a class="reference internal" href="shaders.html">Shaders and Materials</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/lua.html">lua</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/math_types.html">math types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/input.html">input</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/graphics.html">graphics commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/style.html">style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/image.html">image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/mesh.html">mesh</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/shader.html">shader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/material.html">material</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/sound.html">sound</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/scene.html">scene</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/entity.html">entity</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/ui.html">ui</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/physics2d.html">physics2d</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/physics3d.html">physics3d</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <div class="section" id="how-codea-works">
<h1>How Codea Works<a class="headerlink" href="#how-codea-works" title="Permalink to this headline">¶</a></h1>
<p>Codea is primarily designed as a realtime graphical engine that uses callbacks to draw and update the screen</p>
<p>When you create a project you are given a basic template in <code class="docutils literal notranslate"><span class="pre">Main.lua</span></code> that
contains some global functions:</p>
<div class="highlight-lua notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Called once at the beggining</span>
<span class="kr">function</span> <span class="nf">setup</span><span class="p">()</span>
   <span class="n">x</span> <span class="o">=</span> <span class="n">WIDTH</span><span class="o">/</span><span class="mi">2</span>
   <span class="n">y</span> <span class="o">=</span> <span class="n">HEIGHT</span><span class="o">/</span><span class="mi">2</span>
<span class="kr">end</span>

<span class="c1">-- Called every frame</span>
<span class="kr">function</span> <span class="nf">draw</span><span class="p">()</span>
   <span class="n">background</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span>
   <span class="n">style</span><span class="p">.</span><span class="n">push</span><span class="p">().</span><span class="n">fill</span><span class="p">(</span><span class="n">color</span><span class="p">.</span><span class="n">red</span><span class="p">).</span><span class="n">stroke</span><span class="p">(</span><span class="mi">255</span><span class="p">).</span><span class="n">strokeWidth</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
   <span class="n">ellipse</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="kr">end</span>

<span class="c1">-- Called when a touch is detected or updated</span>
<span class="kr">function</span> <span class="nf">touched</span><span class="p">(</span><span class="n">touch</span><span class="p">)</span>
   <span class="kr">if</span> <span class="n">touch</span><span class="p">.</span><span class="n">began</span> <span class="ow">or</span> <span class="n">touch</span><span class="p">.</span><span class="n">moving</span> <span class="kr">then</span>
      <span class="n">x</span> <span class="o">=</span> <span class="n">touch</span><span class="p">.</span><span class="n">x</span>
      <span class="n">y</span> <span class="o">=</span> <span class="n">touch</span><span class="p">.</span><span class="n">y</span>
   <span class="kr">end</span>
<span class="kr">end</span>
</pre></div>
</div>
<p>Each of these functions are called by Codea in response to specific events, such as
<code class="docutils literal notranslate"><span class="pre">setup()</span></code> being called when the project begins running, while <code class="docutils literal notranslate"><span class="pre">draw()</span></code> is called
every time the screen is about to be redrawn</p>
<p>The <code class="docutils literal notranslate"><span class="pre">touched(touch)</span></code> callback is called in reponse to the screen being touched
(on iOS) or a mouse press (on MacOS)</p>
<div class="section" id="setup">
<h2>setup()<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>This function is called exactly once, right before the first frame is about to be drawn and is an ideal spot to put your initialisation code, setting everything up for when <code class="docutils literal notranslate"><span class="pre">draw()</span></code> will be called!</p>
</div>
<div class="section" id="draw">
<h2>draw()<a class="headerlink" href="#draw" title="Permalink to this headline">¶</a></h2>
<p>This is the meat and potatoes of any Codea app, where you will do the majority of your update and drawing logic</p>
</div>
<div class="section" id="touched-touch">
<h2>touched(touch)<a class="headerlink" href="#touched-touch" title="Permalink to this headline">¶</a></h2>
<p>This is your primary source of interaction with users</p>
</div>
<div class="section" id="additional-events">
<h2>Additional Events<a class="headerlink" href="#additional-events" title="Permalink to this headline">¶</a></h2>
<div class="section" id="update-dt">
<h3>update(dt)<a class="headerlink" href="#update-dt" title="Permalink to this headline">¶</a></h3>
<p>As an alternative to doing your update logic in <code class="docutils literal notranslate"><span class="pre">draw()</span></code> you can also use <code class="docutils literal notranslate"><span class="pre">update(dt)</span></code>, where <code class="docutils literal notranslate"><span class="pre">dt</span></code> is the amount of delta time since last frame (also available in time.delta)</p>
</div>
<div class="section" id="fixedupdate-dt">
<h3>fixedUpdate(dt)<a class="headerlink" href="#fixedupdate-dt" title="Permalink to this headline">¶</a></h3>
<p>A special update function that is called a fixed number of times per second regardless of the current framerate, ideal for physics calculations and simulations that require a stable stepping rate. The delta time value passed in is the same as <code class="code highlight lua docutils literal notranslate"><span class="name"><span class="pre">time</span></span><span class="punctuation"><span class="pre">.</span></span><span class="name"><span class="pre">fixedDelta</span></span></code></p>
</div>
<div class="section" id="keypressed-keypress">
<h3>keyPressed(keyPress)<a class="headerlink" href="#keypressed-keypress" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="keyreleased-keypress">
<h3>keyReleased(keyPress)<a class="headerlink" href="#keyreleased-keypress" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="scroll-gesture">
<h3>scroll(gesture)<a class="headerlink" href="#scroll-gesture" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="hover-gesture">
<h3>hover(gesture)<a class="headerlink" href="#hover-gesture" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="drawing.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Drawing</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="codea_3x.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Migration from Codea 3.x</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, John Millard |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="../_sources/manual/codea.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">How Codea Works</a><ul>
<li><a class="reference internal" href="#setup">setup()</a></li>
<li><a class="reference internal" href="#draw">draw()</a></li>
<li><a class="reference internal" href="#touched-touch">touched(touch)</a></li>
<li><a class="reference internal" href="#additional-events">Additional Events</a><ul>
<li><a class="reference internal" href="#update-dt">update(dt)</a></li>
<li><a class="reference internal" href="#fixedupdate-dt">fixedUpdate(dt)</a></li>
<li><a class="reference internal" href="#keypressed-keypress">keyPressed(keyPress)</a></li>
<li><a class="reference internal" href="#keyreleased-keypress">keyReleased(keyPress)</a></li>
<li><a class="reference internal" href="#scroll-gesture">scroll(gesture)</a></li>
<li><a class="reference internal" href="#hover-gesture">hover(gesture)</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    </body>
</html>